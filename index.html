<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LibISAAC: ISAAC, the fast CSPRNG, reimplemented in a nicer, documented, modern C11 API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LibISAAC
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A modern reimplementation of the ISAAC CPRNG.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ISAAC, the fast CSPRNG, reimplemented in a nicer, documented, modern C11 API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>LibISAAC offers the tiny and fast <a href="https://www.burtleburtle.net/bob/rand/isaacafa.html">ISAAC</a> cryptographically secure pseudo random number generator (CSPRNG), in its 32-bit and 64-bit version wrapped into a modern, ISO C11, documented API, ready for embedded usage.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
About ISAAC</h1>
<p>Quoting from <a href="https://www.burtleburtle.net/bob/rand/isaacafa.html">its website</a>:</p>
<blockquote class="doxtable">
<p>ISAAC (Indirection, Shift, Accumulate, Add, and Count) generates 32-bit random numbers. Averaged out, it requires 18.75 machine cycles to generate each 32-bit value. Cycles are guaranteed to be at least 240 values long, and they are 28295 values long on average. The results are uniformly distributed, unbiased, and unpredictable unless you know the seed. [...] ISAAC-64 generates a different sequence than ISAAC, but it uses the same principles. It uses 64-bit arithmetic. It generates a 64-bit result every 19 instructions. All cycles are at least 272 values, and the average cycle length is 216583. </p>
</blockquote>
<p>ISAAC and its original source code (on which this version is based on) were created by Bob Jenkins and released into the public domain.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Usage example</h1>
<div class="fragment"><div class="line"><span class="comment">// Init the context with a secret seed</span></div>
<div class="line"><a class="code" href="structisaac__ctx__t.html">isaac_ctx_t</a> ctx;</div>
<div class="line"><span class="keyword">const</span> uint8_t seed[16] = {1, 2, 3, 4, 5, 6, 7, 8,</div>
<div class="line">                          9, 10, 11, 12, 13, 14, 15, 16};</div>
<div class="line"><a class="code" href="isaac_8h.html#ac9d9713f5028ced859efa07e856c27b1">isaac_init</a>(&amp;ctx, seed, <span class="keyword">sizeof</span>(seed));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// If you DON&#39;T need ISAAC for security purposes, an all-zero</span></div>
<div class="line"><span class="comment">// seed may also be of interested. Just pass a NULL seed.</span></div>
<div class="line"><a class="code" href="isaac_8h.html#ac9d9713f5028ced859efa07e856c27b1">isaac_init</a>(&amp;ctx, NULL, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Extract ANY amount of pseudo-random integers</span></div>
<div class="line"><a class="code" href="isaac_8h.html#a0b957722590aed42ec2fda7ffca02056">isaac_uint_t</a> stream[300] = {0};</div>
<div class="line"><a class="code" href="isaac_8h.html#a0bc0ed90d33cf226130017f0f8f3caf1">isaac_stream</a>(&amp;ctx, stream, 300);</div>
<div class="line"><a class="code" href="isaac_8h.html#a0b957722590aed42ec2fda7ffca02056">isaac_uint_t</a> another_stream[5000] = {0};</div>
<div class="line"><a class="code" href="isaac_8h.html#a0bc0ed90d33cf226130017f0f8f3caf1">isaac_stream</a>(&amp;ctx, stream, 5000);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Note that ISAAC provides integers, not bytes.</span></div>
<div class="line"><span class="comment">// If you need bytes, convert the integers to little endian-</span></div>
<div class="line"><span class="comment">// or big endian-encoded stream of bytes.</span></div>
<div class="line">uint8_t bytes[300 * <span class="keyword">sizeof</span>(<a class="code" href="isaac_8h.html#a0b957722590aed42ec2fda7ffca02056">isaac_uint_t</a>)];</div>
<div class="line"><a class="code" href="isaac_8h.html#a873d4d8eaefcd9c981704db388c79047">isaac_to_big_endian</a>(bytes, stream, 300);</div>
<div class="line"><span class="comment">// or isaac_to_little_endian(bytes, stream, 300);</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Done using ISAAC? Cleanup the context to avoid leaving traces</span></div>
<div class="line"><span class="comment">// of the state and of the seed.</span></div>
<div class="line"><a class="code" href="isaac_8h.html#a01106cb216d9a5d1ec47b95cdbb70eff">isaac_cleanup</a>(&amp;ctx);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Include it in your project</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Bitness</h2>
<p>Depending on your architecture, you may want to use the version of ISAAC optimised for 32 or 64 bit words. To do so, set the <code>#define ISAAC_BITS</code> to <code>32</code> or <code>64</code> during compilation or directly in the header file. It defaults to 64 when unspecified.</p>
<p>Differences:</p><ul>
<li>the output differs between the two (it's expected to differ)</li>
<li>the context grows twice in size when using the 64 bit version<ul>
<li>32 bit: 2064 B</li>
<li>64 bit: 4128 B</li>
</ul>
</li>
<li>in the 64 bit version, twice the amount of bytes is provided per reshuffling of the state</li>
</ul>
<p>Please note that altering <code>ISAAC_BITS</code> does not set your compiler to compile LibISAAC for a 32 or 64 target architecture, it simply chooses which integers to use based on <b>your</b> choice, not the compiler's. You may want to choose the best version for your system, but you can compile both versions on any system.</p>
<p>Examples:</p>
<ul>
<li>a 32-bit microcontroller works best with <code>ISAAC_BITS=32</code></li>
<li>a 64-bit desktop works best with <code>ISAAC_BITS=64</code></li>
<li>a 64-bit desktop that has to test the output of ISAAC coming from a 32-bit microcontroller (assuming the same seed is known to both), should compile with <code>ISAAC=BITS=32</code> to get the same output.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Static source inclusion</h2>
<p>Copy the <code><a class="el" href="isaac_8h.html">inc/isaac.h</a></code> and <code>src/isaac.c</code> files into your existing C project, add them to the source folders and compile..</p>
<p>If you prefer a specific bitness, redefine <code>ISAAC_BITS</code> in the header file.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Compiling into all possible targets</h2>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release -DISAAC_BITS=32</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><p>This will build all targets:</p>
<ul>
<li>a <code>libisaac32.a</code> static library</li>
<li>a test runner executable <code>testisaac32</code></li>
<li>the Doxygen documentation (if Doxygen is installed)</li>
</ul>
<p>To compile with the optimisation for size, use the <code>-DCMAKE_BUILD_TYPE=MinSizeRel</code> flag instead.</p>
<p>If you prefer using 64 bit integers, set <code>-DISAAC_BITS=64</code>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="aisaac_8h_html_a0b957722590aed42ec2fda7ffca02056"><div class="ttname"><a href="isaac_8h.html#a0b957722590aed42ec2fda7ffca02056">isaac_uint_t</a></div><div class="ttdeci">uint64_t isaac_uint_t</div><div class="ttdef"><b>Definition:</b> isaac.h:83</div></div>
<div class="ttc" id="aisaac_8h_html_a873d4d8eaefcd9c981704db388c79047"><div class="ttname"><a href="isaac_8h.html#a873d4d8eaefcd9c981704db388c79047">isaac_to_big_endian</a></div><div class="ttdeci">void isaac_to_big_endian(uint8_t *bytes, const isaac_uint_t *values, size_t amount_of_values)</div><div class="ttdoc">Utility function, converting an array of 32-bit/64-bit integers into bytes using big endian byte orde...</div></div>
<div class="ttc" id="aisaac_8h_html_a01106cb216d9a5d1ec47b95cdbb70eff"><div class="ttname"><a href="isaac_8h.html#a01106cb216d9a5d1ec47b95cdbb70eff">isaac_cleanup</a></div><div class="ttdeci">void isaac_cleanup(isaac_ctx_t *ctx)</div><div class="ttdoc">Safely erases the context.</div></div>
<div class="ttc" id="aisaac_8h_html_a0bc0ed90d33cf226130017f0f8f3caf1"><div class="ttname"><a href="isaac_8h.html#a0bc0ed90d33cf226130017f0f8f3caf1">isaac_stream</a></div><div class="ttdeci">void isaac_stream(isaac_ctx_t *ctx, isaac_uint_t *ints, size_t amount)</div><div class="ttdoc">Provides the next pseudo-random integer.</div></div>
<div class="ttc" id="astructisaac__ctx__t_html"><div class="ttname"><a href="structisaac__ctx__t.html">isaac_ctx_t</a></div><div class="ttdoc">Context of the ISAAC CPRNG.</div><div class="ttdef"><b>Definition:</b> isaac.h:105</div></div>
<div class="ttc" id="aisaac_8h_html_ac9d9713f5028ced859efa07e856c27b1"><div class="ttname"><a href="isaac_8h.html#ac9d9713f5028ced859efa07e856c27b1">isaac_init</a></div><div class="ttdeci">void isaac_init(isaac_ctx_t *ctx, const uint8_t *seed, uint16_t seed_bytes)</div><div class="ttdoc">Initialises the ISAAC CPRNG with a seed.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
